openapi: "3.0.0"
info:
  version: "0.0.1"
  title: "Swagger For IVI web application"
  description: "IVI API Interface"
servers:
  - url: "https://test.zakaz-ivi.online:47001"
    description: "IVI API Server"
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT 
    basicAuth:
      type: http
      scheme: basic
  security:
    - bearerAuth: [] 

  # schemas part

  schemas:
    Auth:
      type: object
      properties:
        login:
          type: string
          example: "login"
        password:
          type: string
          example: "password"
    AuthResponse:
      type: object
      properties:
        buildInfo:
          type: string
          example: ""
        refreshTokenExpiration:
          type: string
          example: "2023-10-18T11:54:35"
        token:
          type: string
          example: "ew0KImFsZyI6ICJIUzI1NiIsDQoidHlwIjogIkpXVCINCn0..."
    NewPassword:
      type: object
      properties:
        id:
          type: string
          description: user id
          example: "id"
        password:
          type: string
          example: "password"
    NewPasswordResponse:
      type: object
      properties:
        buildInfo:
          type: string
          example: ""
        refreshTokenExpiration:
          type: string
          example: "2023-10-18T11:54:35"
        token:
          type: string
          example: "ew0KImFsZyI6ICJIUzI1NiIsDQoidHlwIjogIkpXVCINCn0..."
    RegisterResponse:
      type: object
      properties:
        buildInfo:
          type: string
          example: ""
        refreshTokenExpiration:
          type: string
          example: "2023-10-18T11:54:35"
        token:
          type: string
          example: "ew0KImFsZyI6ICJIUzI1NiIsDQoidHlwIjogIkpXVCINCn0..."    
    GetRegistration:
      type: object
      properties:
        email:
          type: string
          example: "email@mail.com"
          description: "Почта для регистрации пользователя"
    GetRegistrationResponse:
      type: object
      properties:
        email:
          type: string
          example: "email@mail.com"
        id:
          type: string
          example: "id"
    GetRegEmail:
      type: object
      properties:
        id:
          type: string
          example: "id"
    GetUserResponse:
      type: object
      properties:
        userName:
          type: string
          example: "userName"
    GetRegEmailResponse:
      type: object
      properties:
        email:
          type: string
          example: "email@mail.com"
        userName?:
          type: string
          example: "userName"
    Recovery:
      type: object
      properties:
        email:
          type: string
          example: "email@mail.com"
        userName:
          type: string
          example: "user"
    RecoveryResponse:
      type: object
      properties:
        OK:
          type: boolean
          example: true
    Register:
      type: object
      properties:
        id:
          type: string
          example: "id"
        login:
          type: string
          example: "user"
        password:
          type: string
          example: "password"
        customerType:
          type: string
          example: "ФЛ"
          description: "Юридическая форма заказчика"
          enum:
            - ФЛ
            - ИП
            - ЮЛ
    GetUserInfoResponse:
      type: object
      properties:
        userName:
          type: string
          example: "userName"
        customerType:
          type: string
          example: "ФЛ"
          description: "Юридическая форма заказчика"
          enum:
            - ФЛ
            - ИП
            - ЮЛ
        customerRole:
          type: string
          example: "buyer"
          description: "Роль пользователя: покупатель (buyer), производитель (manufactor), поставщик (vendor)"
          enum:
            - buyer
            - manufactor
            - vendor
        inModeration:
          type: boolean
          example: false
          description: "true, если заявка на изменение роли находится в стадии модерации"
        proxyStatus:
          type: string
          example: "none"
          description: "Статус проверки доверенности: нет(none), на проверке (checking), есть (good)"
          enum:
            - none
            - checking
            - good
        proxyBlankId:
          type: string
          example: "011-ef15-0001"
          description: "id документа бланка доверенности для скачивания"
        isBaseConfig:
          type: boolean
          example: true
          description: "true, если пользователь использует базовую конфигурацию"
        email:
          type: string
          example: "user@mail.com"
        phone:
          type: string
          example: "+7 905 703-44-03"  
        surname:
          type: string
          example: "Вельяминов-Зернов"
          description: "Фамилия"
        name:
          type: string
          example: "Мухаммад-Юсуф"
          description: "Имя"
        secondName:
          type: string
          example: "Александрович"
          description: "Отчество"
        counterparties:
          type: array
          items:
            $ref: '#/components/schemas/Counterparty'
    Counterparty:
      type: object
      properties:
        id:
          type: string
          example: "131a-23bc2213-12aa-00ff"
          description: "Уникальный идентификатор организации"
        companyName:
          type: string
          example: "МясГазСтрой"
          description: "Название организации"
        INN:
          type: string
          example: "7810348720"
          description: "ИНН"
        KPP:
          type: string
          example: "000000000"
          description: "КПП"
        OKPO:
          type: string
          example: "000000000"
          description: "ОКПО"
        lawAddress:
          type: string
          example: "СПб, Антоновская ул., д. 14, офис 58"
          description: "Юридический адрес" 
        factAddress:
          type: string
          example: "СПб, пр. Маршала Жукова, д. 27, офис 629"
          description: "Фактический адрес"
        BIK:
          type: string
          example: "000000000"
          description: "БИК банка"
        bankName:
          type: string
          example: "АКБ Абсолют Банк (ПАО)"
          description: "Название банка"        
        corrBankAccount:
          type: string
          example: "40802810000000000000"
          description: "Корреспондентский счет"
        privateBankAccount:
          type: string
          example: "40802810000000000000"
          description: "Расчетный счет"
        phone:
          type: string
          example: "+7 (812) 747-65-93"
          description: "Телефон организации"
        owner:
          type: boolean
          example: false
          description: "Запретить удалять контрагента"
    ConfirmNewEmail:
      type: object
      properties:
        email:
          type: string
          example: "newmail@mail.com"
    SendSms:
      type: object
      properties:
        phone:
          type: string
          example: "+7 905 703-44-03"
    ConfirmPhone:
      type: object
      properties:
        smsCode:
          type: string
          example: "11111"
    SetUserFullname:
      type: object
      properties:
        name:
          type: string
          example: "Мухаммад-Юсуф"
          description: "Имя"
        surname:
          type: string
          example: "Вельяминов-Зернов" 
          description: "Фамилия"
        secondName:
          type: string
          example: "Александрович"
          description: "Отчество"
    SetNewPassword:
      type: object
      properties:
        oldPassword:
          type: string
          example: "oldPassword"
          description: "Старый пароль"
        newPassword:
          type: string
          example: "newPassword" 
          description: "Новый пароль"
    RemoveCounterparty:
      type: object
      properties:
        id:
          type: string
          example: "131a-23bc2213-12aa-00ff"
          description: "Уникальный идентификатор организации"
    AddCounterparty:
      type: object
      properties:
        companyName:
          type: string
          example: "МясГазСтрой"
          description: "Название организации"
        INN:
          type: string
          example: "7810348720"
          description: "ИНН"
        KPP:
          type: string
          example: "000000000"
          description: "КПП"
        OKPO:
          type: string
          example: "000000000"
          description: "ОКПО"
        lawAddress:
          type: string
          example: "СПб, Антоновская ул., д. 14, офис 58"
          description: "Юридический адрес" 
        factAddress:
          type: string
          example: "СПб, пр. Маршала Жукова, д. 27, офис 629"
          description: "Фактический адрес"
        BIK:
          type: string
          example: "000000000"
          description: "БИК банка"
        privateBankAccount:
          type: string
          example: "40802810000000000000"
          description: "Расчетный счет"
        phone:
          type: string
          example: "+7 (812) 747-65-93"
          description: "Телефон организации"
    AddCounterpartyResponse:
      type: object
      properties:
        id:
          type: string
          example: "131a-23bc2213-12aa-00ff"
          description: "Уникальный идентификатор организации"
    EditCounterparty:
      type: object
      properties:
        id:
          type: string
          example: "131a-23bc2213-12aa-00ff"
          description: "Уникальный идентификатор организации"
        companyName:
          type: string
          example: "МясГазСтрой"
          description: "Название организации"
        INN:
          type: string
          example: "7810348720"
          description: "ИНН"
        KPP:
          type: string
          example: "000000000"
          description: "КПП"
        OKPO:
          type: string
          example: "000000000"
          description: "ОКПО"
        lawAddress:
          type: string
          example: "СПб, Антоновская ул., д. 14, офис 58"
          description: "Юридический адрес" 
        factAddress:
          type: string
          example: "СПб, пр. Маршала Жукова, д. 27, офис 629"
          description: "Фактический адрес"
        BIK:
          type: string
          example: "000000000"
          description: "БИК банка"       
        privateBankAccount:
          type: string
          example: "40802810000000000000"
          description: "Расчетный счет"
        phone:
          type: string
          example: "+7 (812) 747-65-93"
          description: "Телефон организации"
    GetCounterpartyByINN:
      type: object
      properties:
        INN:
          type: string
          example: "7810348720"
          description: "ИНН организации"
    GetBankByBIK:
      type: object
      properties:
        BIK:
          type: string
          example: "044030653"
          description: "БИК банка"
    GetBankByBIKResponse:
      type: object
      properties:
        bankName:
          type: string
          example: "ПАО СБЕРБАНК"
          description: "Название банка"
        corrAccount:
          type: string
          example: "30101810500000000653"
          description: "Корреспондентский счет"
    ChangeToManufactor:
      type: object
      properties:
        shortName:
          type: string
          example: "Вентустановки"
          description: "Короткое название производителя"
    ChangeToVendor:
      type: object
      properties:
        canSellToPhysical:
          type: boolean
          example: true
          description: "Разрешены продажи физическим лицам"
        termCreateBill:
          type: number
          example: 1
          description: "Срок выставления счёта (дни)"
        termPaymentBill:
          type: number
          example: 1
          description: "Срок оплаты счёта (дни)"
        termSupply:
          type: number
          example: 1
          description: "Срок поставки (минимальный, дни)"
        manufactorCityId:
          type: string
          example: "0011-ef15-0001"
          description: "id населенного пункта производства"
        loadAddress:
          type: string
          example: "СПб, пр. Ветеранов, 56, строение 4"
          description: "Адрес погрузки"
        selfDelivery:
          type: boolean
          example: true
          description: "Разрешен самовывоз"
        vendorDelivery:
          type: boolean
          example: true
          description: "Разрешена доставка поставщиком"
        deliveryRegions:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                example: "011-ef15-001"
                description: "id региона доставки"
    GetCityList:
      type: object
      properties:
        search:
          type: string
          example: "Александ"
          description: "Строка поиска населенного пункта (поиск начинает работать при длине строки поиска >= 3)"
    GetCityListResponse:
      type: array
      example: [{"id": "0011-ef15-0001", "name": "Александровка — село в Майминском районе респ. Алтай"}, {"id": "0011-ef15-0002", "name": "Александровка — посёлок в Благовещенском районе респ. Алтай"}, {"id": "0011-ef15-0003", "name": "Александровка — село в Завьяловском районе респ. Алтай"}, {"id": "0011-ef15-0004", "name": "А всего Александровок в России 329 штук по версии Википедии, а сколько в 1С?"}]
      items:
        type: object
        properties:
          id:
            type: string
            description: "id населенного пункта"
          name:
            type: string
            description: "Наименование населенного пункта"
    GetRegionListResponse:
      type: array
      example: [{"id": "0011-ef15-0001", "name": "Вся Россия"}, {"id": "0011-ef15-0002", "name": "Москва"}, {"id": "0011-ef15-0003", "name": "Московская обл."}, {"id": "0011-ef15-0004", "name": "СПб"}, {"id": "0011-ef15-0005", "name": "Ленинградская обл."}, {"id": "0011-ef15-0006", "name": "Адыгея"}, {"id": "0011-ef15-0007", "name": "Алтай"}, {"id": "0011-ef15-0008", "name": "Башкортостан"}, {"id": "0011-ef15-0009", "name": "Бурятия"}]
      items:
        type: object
        properties:
          id:
            type: string
            description: "id региона"
          name:
            type: string
            description: "Наименование региона"
    SetProxyId:
      type: object
      properties:
        id:
          type: string
          example: "121-ab0-32312-00ff"
          description: "id загруженного документа доверенности"
    Changemail:
      type: object
      properties:
        id:
          type: string
          example: "121-ab0-32312-00ff"
          description: "id сессии"
    GetPacksInfo:
      type: object
      properties:
        availCalcs:
          type: number
          example: 59264
          description: "Доступно всего расчетов"
        availDate:
          type: string
          example: "15.01.2024"
          description: "Самая дальняя дата окончания действия из всех доступных пакетов"
        autoActivation:
          type: boolean
          example: false
          description: "Статус режима автоактивации пакетов"
        packs:
          type: array
          description: "Массив пакетов"
          items:
            $ref: '#/components/schemas/PacksItem'
        total:
          type: object
          description: "Итоговые данные по пакетам"
          properties:
            packsCount:
              type: number
              example: 21
              description: "Всего пакетов"
            calcsCount:
              type: number
              example: 4300
              description: "Всего расчетов"
            calcSum:
              type: number
              example: 12000
              description: "Стоимость всех пакетов"
            calcsUsed:
              type: number
              example: 2948
              description: "Всего использовано расчетов"
            calcsLeft:
              type: number
              example: 1352
              description: "Всего расчетов осталось"
    GetBuySchema:
      type: object
      properties:
        buySchema:
          type: array
          example: [{packCount: 100, periods: [{period: 30, sum: 300, price: 3},{period: 60, sum: 350, price: 3.5}]},{packCount: 300, periods: [{period: 90, sum: 600, price: 2}, {period: 120, sum: 700, price: 2.33}]}]
          description: "Возможные варианты покупки количества пакетов / периодов"
          items:
            type: object
            properties:
              packCount: 
                type: number
              periods: 
                type: array
                items:
                  $ref: '#/components/schemas/BuyItem'
    BuyItem:
      type: object
      properties:
        period:
          type: number
          description: "Кол-во дней, доступных для расчетов"
        sum:
          type: number
          description: "Стоимость пакета"
        price:
          type: number
          description: "Стоимость одного расчета"
    PacksItem:
      type: object
      properties:
        id:
          type: string
          example: "000 000 000 000 000 153"
          description: "id пакета"
        order:
          type: number
          example: 1
          description: "Порядок расположения неиспользованных / неполностью использованных пакетов, для остальных -1"
        activateStatus:
          type: boolean
          example: false
          description: "Статус активации пакета"
        calcsCount:
          type: number
          example: 100
          description: "Количество расчетов в пакете"
        calcsPeriod:
          type: number
          example: 90
          description: "Количество дней для расчетов в пакете"
        calcPrice:
          type: number
          example: 10
          description: "Цена одного расчета"
        calcSum:
          type: number
          example: 1000
          description: "Стоимость пакета"
        paymentDate:
          type: string
          example: "04.12.2023"
          description: "Дата оплаты" 
        calcsUsed:
          type: number
          example: 68
          description: "Расчетов использовано"
        calcsLeft:
          type: number
          example: 32
          description: "Расчетов осталось"
        activateDate:
          type: string
          example: "07.12.2023"
          description: "Дата активации пакета"
        endDate:
          type: string
          example: "06.03.2024"
          description: "Дата окончания действия пакета"
    GetPacksBill:
      type: object
      properties:
        packCountBuy:
          type: number
          example: 300
          description: "Расчетов в заказе"
        packPeriodBuy:
          type: number
          example: 60
          description: "Период заказа"
    GetPacksBillResponse:
      type: object
      properties:
        documentId:
          type: string
          example: "4602259e-56fe-4614-affb-f6e8c7ed573f"
          description: "id документа счета для скачивания"
    GetDocumentById:
      type: object
      properties:
        id:
          type: string
          example: "4602259e-56fe-4614-affb-f6e8c7ed573f"
          description: "id документа для скачивания"
    GetDocumentByIdResponse:
      type: file
    FileUploadResponse:
      type: object
      properties:
        id:
          type: string
          example: "4602259e-56fe-4614-affb-f6e8c7ed573f"
          description: "id файла"
    SetAutoActivation:
      type: object
      properties:
        autoActivation:
          type: boolean
          example: true
          description: "Установить режим автоактивации пакетов"
    SetPacksOrder:
      type: array
      example: [{"id": "000 000 000 000 000 153", "order": 0}, {"id": "000 000 000 000 000 158", "order": 1}]
      items:
        type: object
        properties:
          id:
            type: string
            example: "000 000 000 000 000 153"
            description: "id пакета"
          order:
            type: number
            example: 1
            description: "Порядок расположения"
    PacksActivate:
      type: object
      properties:
        id:
          type: string
          example: "000 000 000 000 000 153"
          description: "id пакета для ручной активации"
    GetOrderList:
      type: object
      example: {"orderBy": "objectNameInc", "filters": [{"fieldName": "orderDate", "searchFilter": "12.04.1961"}, {"fieldName": "comment", "searchFilter": "УрЮрВКос!"}, {"fieldName": "stateName", "searchFilter": "Открыт"}]}
      properties:
        orderBy:
          type: string
          description: "Задание сортировки: имя поля + Inc/Dec на конце"
          default: none
          enum:
            - none
            - objectNameInc
            - orderDateInc
            - shipmentDateInc
            - commentInc
            - summInc
            - orderStatusInc
            - paymentStatusInc
            - shipmentStatusInc
            - objectNameDec
            - orderDateDec
            - shipmentDateDec
            - commentDec
            - summDec
            - orderStatusDec
            - paymentStatusDec
            - shipmentStatusDec
        filters:
          type: array
          description: "Массив фильтров по полям"
          items:
            type: object
            properties:
              fieldName:
                type: string
                description: "Имя поля"
                enum:
                  - objectName
                  - orderDateFrom
                  - orderDateTo
                  - manufactorName
                  - shipmentDate
                  - comment
                  - summ
                  - stateName
              searchFilter:
                type: string
                description: "Строка фильтрации"
    GetOrderListResponse:
      type: array
      example: [{"id": "34de-21abc-12-00e",	"objectName": "Эрмитаж", "objectAddress":"СПБ, Дворцовая наб., д.38", "orderName":"35724/22-17", "manufactorName": "ООО Вентретейл", "customerName": "ИП Джанушвили", "orderDate": "2023-10-01T00:00:00", "shipmentDate":"2023-10-21T00:00:00", "comment":"Лучший заказ в моей жизни", "summ":27340, "orderStatus":"ordered", "paymentStatus":"partpay", "shipmentStatus":"partoverdue"}]
      items:
        $ref: '#/components/schemas/OrderItem'
    OrderItem:
      type: object
      properties:
        id:
          type: string
          description: "ID заказа"
        objectName:
          type: string
          description: "Название объекта"
        objectAddress:
          type: string
          description: "Адрес объекта"        
        orderName:
          type: string
          description: "Номер заказа"
        manufactorName:
          type: string
          description: "Имя поставщика"
        customerName:
          type: string
          description: "Имя покупателя"
        orderDate:
          type: string
          description: "Дата заказа"
        shipmentDate:
          type: string
          description: "Дата отгрузки"
        comment:
          type: string
          description: "Комментарий к заказу"
        summ:
          type: number
          description: "Сумма заказа"
        orderStatus:
          type: string
          description: "Статус заказа: Новый(new), Заказано(ordered), Размещён(publish), В работе(inwork), Завершён(done), Отменён(cancel)"
          enum:
            - new
            - ordered
            - publish
            - inwork
            - done
            - cancel
        paymentStatus:
          type: string
          description: "Статус оплаты: Не оплачен(none), Частично оплачен(partpay), Просрочен(overdue), Оплачен(paid)"
          enum:
            - none
            - partpay
            - overdue
            - paid
        shipmentStatus:
          type: string
          description: "Статус отгрузки: Не отгружен(none), Отгружен частично(partshipment), Частично отгружен/просрочен(partoverdue), Просрочен(overdue), Отгружен(done)"
          enum:
            - none
            - partshipment
            - partoverdue
            - overdue
            - done
    GetOrderStates:
      type: array
      example: [{"id": "34de-21abc-12-001",	"stateName": "Новый", "isDefault": false}, {"id": "34de-21abc-12-002",	"stateName": "Открыт", "isDefault": true}, {"id": "34de-21abc-12-002",	"stateName": "Актуальные", "isDefault": false}]
      items:
        type: object
        properties:
          id:
            type: string
            description: "id статуса заказа, либо значение 'split' для отображения разделителя"
          stateName:
            type: string
            description: "Наименование статуса заказа"
          isDefault:
            type: boolean
            descrition: "Является ли опция значением по умолчанию"
    GetCurrectCount:
      type: object
      properties:
        count:
          type: number
          descrition: "Количество заказов, требующих внимания"
          example: 24
    CreateNewOrder:
      type: object
      description: "id заказа, позициями которого нужно наполнить новый заказ"
      example: {"id": "34de-21abc-12-001"}
      properties:
        id:
          type: string
          description: "id заказа на основе которого нужно создать новый"
    GetOrder:
      type: object
      example: {"id":"34de-21abc-12-004"}
      description: "id заказа"
      properties:
        id:
          type: string
    GetDeliveryWays:
      type: object
      example: {"id":"34de-21abc-12-004"}
      description: "id производителя"
      properties:
        id:
          type: string
    CompareVendors:
      type: object
      properties:
        orderId:
          type: string
          description: "id заказа"
          example: "0101-ef15-0011"
        vendorId:
          type: string
          description: "id поставщика"
          example: "0101-ef15-0022"
    CompareVendorsResponse:
      type: object
      properties:
        vendorInfo:
          type: object
          properties:
            id:
              type: string
              example: "0101-ef15-0001"
              description: "id поставщика"
            summ:
              type: number
              example: 26394867
              description: "Пересчитанная сумма заказа"
            planDelivery:
              type: string
              example: "17.06.2024"
              description: "Расчетная дата поставки"
            compareStatus:
              type: string
              example: "less"
              description: "Статус результата пересчета заказа: less - сумма меньше, чем в исходном Заказе, equal - сумма равна исходному Заказу, more - сумма больше, чем в исходном Заказе, lack - нет расчёта по некоторым позициям"
              enum:
                - less
                - equal
                - more
                - lack
            comment:
              type: string
              example: "(исходный Заказ)"
              description: "Комментарий поставщика"
        positions:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                example: "0101-ef15-0018"
                description: "id позиции"
              name:
                type: string
                example: "Отвод х/к ст. 1.2мм, сварн., 700х400"
                description: "Наименование позиции"
              count:
                type: number
                example: 17
                description: "Количество в заказе"
              unit:
                type: string
                example: "шт"
                description: "Единицы измерения" 
              price:
                type: number
                example: 623
                description: "Исходная цена позиции"             
              summ:
                type: number
                example: 10591
                description: "Исходная сумма позиции"
              vendorPosition:
                type: object
                properties:  
                  price:
                    type: number
                    example: 623
                    description: "Пересчитанная цена позиции"             
                  summ:
                    type: number
                    example: 10591
                    description: "Пересчитанная сумма позиции"
                  compareStatus:
                    type: string
                    example: "equal"
                    description: "Статус результата пересчета позиции: less - сумма меньше, чем в исходном Заказе, equal - сумма равна позиции в исходном Заказе, more - сумма больше, чем в исходном Заказе, lack - нет расчёта по этой позиции"
                    enum:
                      - less
                      - equal
                      - more
                      - lack
    CreateByVendors:
      type: object
      example: {"orderId": "34de-21abc-12-001", "vendorIds": ["34de-21abc-12-002", "34de-21abc-12-003", "34de-21abc-12-004"]}
      properties:
        orderId:
          type: string
          example: "34de-21abc-12-005"
          description: "id заказа"
        vendorIds:
          type: array 
          items:
            type: string
            example: "34de-21abc-12-005"
            description: "id поставщика для создания заказа"
    CreateByVendorsResponse:
      type: array
      example: ["34de-21abc-12-00a", "34de-21abc-12-00b", "34de-21abc-12-00c"]
      items:
        type: string
        description: "id новых заказов"
    RemoveFile:
      type: object
      example: {"fileId": "34de-21abc-12-005"}
      properties:
        fileId:
          type: string
          description: "id файла"
    OrderPutFile:
      type: object
      example: {"orderId":"34de-21abc-12-004", "fileId": "34de-21abc-12-005", "fileName": "Спецификация.pdf"}
      properties:
        orderId:
          type: string
          description: "id заказа"
        fileId:
          type: string
          description: "id файла"
        fileName:
          type: string
          description: "Имя файла"
    GetOrderResponse:
      type: object
      example: {"id": "34de-21abc-12-004 | 0 (если новый)", "manufacturerId":"34de-21abc-12-005", "manufacturerName": "ООО ПО Трубное Решение", "orderName": "394/270-615", "orderDate": "2023-10-18T00:00:00", "objectName": "Государственный Эрмитаж", "objectAddress": "СПб, Дворцовая наб., д.38", "orderStatus": "new", "customerId":"34de-21abc-12-006", "customerName": "ИП Джумаев Мухаммади Фуркатович", "wishShipmentDate": "2023-11-28T00:00:00", "realShipmentDate": "2023-12-15T00:00:00", "comment": "Отличный заказ", "deliveryWayId": "017-ef11-0011-00af", "loadAddress": "Склад готовой продукции", "cargoWeight": 19.365, "cargoMaxSize": 2150, "cargoVolume": 5.39, "recipient": "Бари Алибасов", "recipientPhone": "+7 911 111 11 11", "deliveryCost": 2197, "deliveryInclude": false, "deliveryComment": "Пусть заказ доставят мулаточки", "positions":[{"id": "15ef-1255-ab13", "isActual": true, "name": "Отвод х/к ст. 1.2мм, сварн., 700х400, 90град, шея1=100, шея2=100, фл25/фл25, грунт красн-кор", "printName": "Отвод  х/к ст. 1.2мм", "count": 17, "units": "шт", "price": 6828, "altCount": 23.09, "altUnits": "пог.м", "altUnitsList": ["пог.м","м2"], "altPrice": 4496, "weight": 361.3, "square": 28.051, "system": "ПВ1, АПВ-3", "comment": "Распрекрасная позиция", "taxRate": "20/120", "taxSumm": 456.2, "discountRate": 10.7, "discountSumm": 1395.3, "summ": 116097}], 'orderOptions': {'altUnitsVisible': true, "linearMeterRounded": "ceil", "squareMeterRounded": "ceil", "printNameVisible": false, "systemVisible": false, "commentVisible": false, "ndsVisible": false}, "orderSpecOptions":{"name": true, "count": true, "units": true, "price": true, "altCount": true, "altUnits": true, "altPrice": true, "weight": true, "square": true, "system": true, "comment": true, "taxRate": true, "taxSumm": true, "discountRate": true, "discountSumm": true, "summ": true, "systemGroup": true, "draft": true, "sendEmail": true, "email": "name@mail.ru", "fileFormat": "xlsx"}, "total": {"count": 17, "weight": 361.3, "square": 28.051, "taxSumm": 456.2, "discountAvg": 10.7, "discountSumm": 1395.3, "summ": 116097}}
      properties:
        id:
          type: string
          description: "ID заказа"
        manufacturerId:
          type: string
          description: "Id производителя"
        manufacturerName:
          type: string
          description: "Наименование производителя"
        orderName:
          type: string
          description: "Номер заказа"
        orderDate:
          type: string
          description: "Дата заказа"  
        objectName:
          type: string
          description: "Название объекта"
        objectAddress:
          type: string
          description: "Адрес объекта"   
        orderStatus:
          type: string
          description: "Статус заказа: Новый(new), Заказано(ordered), Размещён(publish), В работе(inwork), Завершён(done), Отменён(cancel)"
          enum:
            - new
            - ordered
            - publish
            - inwork
            - done
            - cancel
        customerId:
          type: string
          description: "Id покупателя"
        customerName:
          type: string
          description: "Наименование покупателя"
        wishShipmentDate:
          type: string
          description: "Желаемая дата отгрузки"
        realShipmentDate:
          type: string
          description: "Согласованная дата отгрузки"
        comment:
          type: string
          description: "Комментарий к заказу"
        deliveryWayId:
          type: string
          description: "id способа доставки (исходя из справочника getDeliveryWays)"
        loadAddress:
          type: string
          description: "Адрес погрузки"
        cargoWeight:
          type: number
          description: "Вес груза, кг"
        cargoMaxSize:
          type: number
          description: "Максимальный габарит, мм"
        cargoVolume:
          type: number
          description: "Объём, м³"
        recipient:
          type: string
          description: "Контактное лицо Получателя"
        recipientPhone:
          type: string
          description: "Контактный телефон Получателя"
        deliveryCost:
          type: number
          description: "Стоимость доставки, ₽"
        deliveryInclude:
          type: boolean
          description: "Включить доставку в стоимость товара"
        deliveryComment:
          type: sting
          description: "Комментарий по доставке"
        positions:
          type: array
          items:
            $ref: '#/components/schemas/OrderPositionItem'
        total:
          type: object
          properties:  
            count:
              type: number
              description: "Количество единиц изделий"
            weight:
              type: number
              description: "Общий вес, кг"
            square:
              type: number
              description: "Общая площадь, м2"
            taxSumm:
              type: number
              description: "Общая сумма НДС"
            discountAvg:
              type: number
              description: "Усредненная по всем позициям скидка"
            discountSumm:
              type: number
              description: "Общая сумма скидки"
            summ:
              type: number
              description: "Сумма заказа"
        orderOptions:
          $ref: '#/components/schemas/GetOptionsResponse'
        specOptions:
          $ref: '#/components/schemas/GetSpecOptionsResponse'
    OrderPositionItem:
      type: object
      properties:
        id:
          type: string
          description: "id изделия"
        isActual:
          type: boolean
          description: "Актуальность данных"
        name:
          type: string
          description: "Наименование поменклатуры"
        printName:
          type: string
          description: "Наименование поменклатуры для документов"
        count:
          type: number
          description: "Количество в основных единицах"
        units:
          type: string
          description: "Наименование основных единиц"
        price:
          type: number
          description: "Цена за основную единицу"
        altCount:
          type: number
          description: "Количество в дополнительных единицах"
        altUnits:
          type: string
          description: "Наименование дополнительных единиц"
        altUnitsList:
          type: array
          description: "Список допустимых для позиции дополнительных единиц"
          items:
            type: string 
        altPrice:
          type: number
          description: "Цена за дополнительную единицу"
        weight:
          type: number
          description: "Вес, кг"
        square:
          type: number
          description: "Площадь, м2"
        system:
          type: string
          description: "Наименование системы"
        comment:
          type: string
          description: "Комментарий"
        taxRate:
          type: string
          description: "Ставка НДС"
        taxSumm:
          type: number
          description: "Сумма НДС"
        discountRate:
          type: number
          description: "Скидка в %"
        discountSumm:
          type: number
          description: "Сумма скидки"
        summ:
          type: number
          description: "Стоимость позиции"
    SaveOrderPositionItem:
      type: object
      properties:
        id:
          type: string
          description: "id изделия"
        count:
          type: number
          description: "Количество в основных единицах"
        altCount:
          type: number
          description: "Количество в дополнительных единицах"
        altUnits:
          type: string
          description: "Наименование дополнительных единиц"
        system:
          type: string
          description: "Наименование системы"
        comment:
          type: string
          description: "Комментарий"
    GetCustomersSchema:
      type: array
      example: [{"id": "34de-21abc-12-004", "name": "ИП Джумаев Мухаммади Фуркатович"}, {"id": "34de-21abc-12-005", "name": "ООО Веселый воздуховод"}, {"id": "34de-21abc-12-006", "name": "ООО Грустный фланец"}]
      items:
        type: object
        properties:
          id:
            type: string
            description: "id покупателя"
          name:
            type: string
            description: "Наименование покупателя"
    GetManufactorsSchema:
      type: array
      example: [{"id": "34de-21abc-12-004", "name": "ИП Джумаев Мухаммади Фуркатович"}, {"id": "34de-21abc-12-005", "name": "ООО Веселый воздуховод"}, {"id": "34de-21abc-12-006", "name": "ООО Грустный фланец"}]
      items:
        type: object
        properties:
          id:
            type: string
            description: "id производителя"
          name:
            type: string
            description: "Наименование производтеля"
    GetOptionsResponse:
      type: object
      example: {'altUnitsVisible': true, "linearMeterRounded": "ceil", "squareMeterRounded": "ceil", "printNameVisible": false, "systemVisible": false, "commentVisible": false, "ndsVisible": false}
      properties:
        altUnitsVisible:
          type: boolean
          description: "Показывать ли в заказе колонки дополнительные параметры"
        linearMeterRounded:
          type: string
          description: "Способ округления погонных метров: В большую сторону(ceil), В меньшую сторону (floor)"
          enum:
            - ceil
            - floor
        squareMeterRounded:
          type: string
          description: "Способ округления квадратных метров: В большую сторону(ceil), В меньшую сторону (floor)"
          enum:
            - ceil
            - floor
        printNameVisible:
          type: boolean
          description: "Показывать ли в заказе колонку 'Наименование в документах'"
        systemVisible:
          type: boolean
          description: "Показывать ли в заказе колонку 'Система'"
        commentVisible:
          type: boolean
          description: "Показывать ли в заказе колонку 'Комментарий'"
        ndsVisible:
          type: boolean
          description: "Показывать ли в заказе колонку 'НДС'"
    SetOptionsResponse:
      type: object
      example: {'id':'011-ed11-0015-1111', 'altUnitsVisible': true, "linearMeterRounded": "ceil", "squareMeterRounded": "ceil", "printNameVisible": false, "systemVisible": false, "commentVisible": false, "ndsVisible": false}
      properties:
        id:
          type: string
          descrition: "id заказа"
        altUnitsVisible:
          type: boolean
          description: "Показывать ли в заказе колонки дополнительные параметры"
        linearMeterRounded:
          type: string
          description: "Способ округления погонных метров: В большую сторону(ceil), В меньшую сторону (floor)"
          enum:
            - ceil
            - floor
        squareMeterRounded:
          type: string
          description: "Способ округления квадратных метров: В большую сторону(ceil), В меньшую сторону (floor)"
          enum:
            - ceil
            - floor
        printNameVisible:
          type: boolean
          description: "Показывать ли в заказе колонку 'Наименование в документах'"
        systemVisible:
          type: boolean
          description: "Показывать ли в заказе колонку 'Система'"
        commentVisible:
          type: boolean
          description: "Показывать ли в заказе колонку 'Комментарий'"
        ndsVisible:
          type: boolean
          description: "Показывать ли в заказе колонку 'НДС'"
    GetSpecOptionsResponse:
      type: object
      example: {"name": true, "count": true, "units": true, "price": true, "altCount": true, "altUnits": true, "altPrice": true, "weight": true, "square": true, "system": true, "comment": true, "taxRate": true, "taxSumm": true, "discountRate": true, "discountSumm": true, "summ": true, "systemGroup": true, "draft": true, "sendEmail": true, "email": "name@mail.ru", "fileFormat": "xlsx"}
      properties:
        name:
          type: boolean
          description: "Выгружать номенклатуру в спецификацию"
        count:
          type: boolean
          description: "Выгружать количество в спецификацию"
        units:
          type: boolean
          description: "Выгружать единицы изменения в спецификацию"
        price:
          type: boolean
          description: "Выгружать цену в спецификацию"
        altCount:
          type: boolean
          description: "Выгружать количество доп. единиц в спецификацию"
        altUnits:
          type: boolean
          description: "Выгружать доп. единицы изменения в спецификацию"
        altPrice:
          type: boolean
          description: "Выгружать цену доп. единиц в спецификацию"
        weight:
          type: boolean
          description: "Выгружать вес в спецификацию" 
        square:
          type: boolean
          description: "Выгружать площадь в спецификацию"
        system:
          type: boolean
          description: "Выгружать систему в спецификацию" 
        comment:
          type: boolean
          description: "Выгружать комментарий в спецификацию"
        taxRate:
          type: boolean
          description: "Выгружать ставку НДС в спецификацию"
        taxSumm:
          type: boolean
          description: "Выгружать сумму НДС в спецификацию"
        discountRate:
          type: boolean
          description: "Выгружать процент скидки в спецификацию"
        discountSumm:
          type: boolean
          description: "Выгружать сумму скидки в спецификацию"
        summ:
          type: boolean
          description: "Выгружать общую сумму в спецификацию"
        systemGroup:
          type: boolean
          description: "Группировать по системам"
        draft:
          type: boolean
          description: "Включить эскизы в спецификацию"
        sendEmail:
          type: boolean
          description: "Отправлять ли спецификацию на почту"
        email:
          type: string
          description: "Адрес эл. почты для отправки спецификации"
        fileFormat:
          type: string
          description: "Формат файла спецификации"
          enum:
            - pdf
            - xls
            - xlsx
            - docx
            - ods
    SetSpecOptionsResponse:
      type: object
      example: {"id": "001-ef11-0015-1111", "name": true, "count": true, "units": true, "price": true, "altCount": true, "altUnits": true, "altPrice": true, "weight": true, "square": true, "system": true, "comment": true, "taxRate": true, "taxSumm": true, "discountRate": true, "discountSumm": true, "summ": true, "systemGroup": true, "draft": true, "sendEmail": true, "email": "name@mail.ru", "fileFormat": "xlsx"}
      properties:
        id:
          type: string
          description: "id заказа"
        name:
          type: boolean
          description: "Выгружать номенклатуру в спецификацию"
        count:
          type: boolean
          description: "Выгружать количество в спецификацию"
        units:
          type: boolean
          description: "Выгружать единицы изменения в спецификацию"
        price:
          type: boolean
          description: "Выгружать цену в спецификацию"
        altCount:
          type: boolean
          description: "Выгружать количество доп. единиц в спецификацию"
        altUnits:
          type: boolean
          description: "Выгружать доп. единицы изменения в спецификацию"
        altPrice:
          type: boolean
          description: "Выгружать цену доп. единиц в спецификацию"
        weight:
          type: boolean
          description: "Выгружать вес в спецификацию" 
        square:
          type: boolean
          description: "Выгружать площадь в спецификацию"
        system:
          type: boolean
          description: "Выгружать систему в спецификацию" 
        comment:
          type: boolean
          description: "Выгружать комментарий в спецификацию"
        taxRate:
          type: boolean
          description: "Выгружать ставку НДС в спецификацию"
        taxSumm:
          type: boolean
          description: "Выгружать сумму НДС в спецификацию"
        discountRate:
          type: boolean
          description: "Выгружать процент скидки в спецификацию"
        discountSumm:
          type: boolean
          description: "Выгружать сумму скидки в спецификацию"
        summ:
          type: boolean
          description: "Выгружать общую сумму в спецификацию"
        systemGroup:
          type: boolean
          description: "Группировать по системам"
        draft:
          type: boolean
          description: "Включить эскизы в спецификацию"
        sendEmail:
          type: boolean
          description: "Отправлять ли спецификацию на почту"
        email:
          type: string
          description: "Адрес эл. почты для отправки спецификации"
        fileFormat:
          type: string
          description: "Формат файла спецификации"
          enum:
            - pdf
            - xls
            - xlsx
            - docx
            - ods
    SearchPositions:
      type: object
      example: {"search": "100 200", "manufacturId": "05494d3d-7633-11ee-816c-c860006cd176"}
      properties:
        search:
          type: string
          description: "Строка для поиска"
        manufacturId:
          type: string
          description: "id производителя"
    SearchPositionsResponse:
      type: array
      example: [{"id": "101d-1311-0e0a", "name": "Воздуховод прямоугольный 100х200"}, {"id": "101d-1311-0e0b", "name": "Отвод 100х200"}, {"id": "101d-1311-0e0b", "name": "Зонт вытяжной 100х200"}]
      items:
        type: object
        properties:
          id:
            type: string
            description: "id найденной позиции"
          name:
            type: string
            description: "Наименование поменклатуры"
    ChangePosition:
      type: object
      example: {"id": "101d-1311-0e0a", "count": 17, "altCount": 15.22, "altUnits": "пог.м", "changeField": "altCount", "linearMeterRounded": "none", "squareMeterRounded":"ceil"}
      properties:
        id:
          type: string
          description: "id запрашиваемой позиции"
        count:
          type: number
          description: "Количество в основных единицах"
        altCount:
          type: number
          description: "Количество в дополнительных единицах"
        altUnits:
          type: string
          description: "Наименование дополнительных единиц"
        changeField:
          type: string
          description: "Поле, которое пользователь изменил при редактировании"
          enum:
            - count
            - altCount
            - altUnits
        linearMeterRounded:
          type: string
          description: "Способ округления погонных метров: В большую сторону(ceil), В меньшую сторону (floor)"
          enum:
            - ceil
            - floor
        squareMeterRounded:
          type: string
          description: "Способ округления квадратных метров: В большую сторону(ceil), В меньшую сторону (floor)"
          enum:
            - ceil
            - floor        
    ChangePositionResponse:
      type: object
      properties:
        id:
          type: string
          description: "id изделия"
        isActual:
          type: boolean
          description: "Актуальность"
        name:
          type: string
          description: "Наименование изделия"
        printName:
          type: string
          description: "Наименование изделия для документов"
        count:
          type: number
          description: "Количество в основных единицах"
        units:
          type: string
          description: "Наименование основных единиц"
        price:
          type: number
          description: "Цена за основную единицу"
        altCount:
          type: number
          description: "Количество в дополнительных единицах"
        altUnits:
          type: string
          description: "Наименование дополнительных единиц"
        altUnitsList:
          type: array
          description: "Список допустимых для позиции дополнительных единиц"
          items:
            type: string
        altPrice:
          type: number
          description: "Цена за дополнительную единицу"
        weight:
          type: number
          description: "Вес, кг"
        square:
          type: number
          description: "Площадь, м2"
        taxRate:
          type: string
          description: "Ставка НДС"
        taxSumm:
          type: number
          description: "Сумма НДС"
        discountRate:
          type: number
          description: "Скидка в %"
        discountSumm:
          type: number
          description: "Сумма скидки"
        summ:
          type: number
          description: "Стоимость позиции"
    SaveOrder:
      type: object
      example: {"id": "34de-21abc-12-004 | 0 (если новый)", "orderDate": "2023-10-18T00:00:00", "customerId": "12c0-1aa3-1411", "manufactorId": "12c0-1aa3-1412", "objectName": "Государственный Эрмитаж", "objectAddress": "СПб, Дворцовая наб., д.38", "wishShipmentDate": "2023-11-28T00:00:00", "realShipmentDate": "2023-12-15T00:00:00", "comment": "Отличный заказ", "deliveryWayId": "00af-ac15-0011-0000", "recipient": "Илон Маск", "recipientPhone": "+7 911 111 1111", "deliveryInclude": true, "deliveryComment": "Доставка на Марс",  "positions":[{"id": "15ef-1255-ab13", "count": 17, "altCount": 23.09, "altUnits": "пог.м", "system": "ПВ1, АПВ-3", "comment": "Распрекрасная позиция"}], 'orderOptions': {'altUnitsVisible': true, "linearMeterRounded": "ceil", "squareMeterRounded": "ceil", "printNameVisible": false, "systemVisible": false, "commentVisible": false, "ndsVisible": false}, "orderSpecOptions":{"name": true, "count": true, "units": true, "price": true, "altCount": true, "altUnits": true, "altPrice": true, "weight": true, "square": true, "system": true, "comment": true, "taxRate": true, "taxSumm": true, "discountRate": true, "discountSumm": true, "summ": true, "systemGroup": true, "draft": true, "sendEmail": true, "email": "name@mail.ru", "fileFormat": "xlsx"}}
      properties:
        id:
          type: string
          description: "ID заказа"
        orderDate:
          type: string
          description: "Дата заказа"  
        customerId:
          type: string
          description: "Id покупателя"
        manufactorId:
          type: string
          description: "Id производителя"
        objectName:
          type: string
          description: "Наименование объекта"
        objectAddress:
          type: string
          description: "Адрес объекта"
        wishShipmentDate:
          type: string
          description: "Желаемая дата отгрузки"
        realShipmentDate:
          type: string
          description: "Согласованная дата отгрузки"
        comment:
          type: string
          description: "Комментарий к заказу"
        deliveryWayId:
          type: string
          description: "id способа доставки (исходя из справочника getDeliveryWays)"
        recipient:
          type: string
          description: "Контактное лицо Получателя"
        recipientPhone:
          type: string
          description: "Контактный телефон Получателя"
        deliveryInclude:
          type: boolean
          description: "Включить доставку в стоимость товара"
        deliveryComment:
          type: sting
          description: "Комментарий по доставке"
        positions:
          type: array
          items:
            $ref: '#/components/schemas/SaveOrderPositionItem'
        orderOptions:
          $ref: '#/components/schemas/GetOptionsResponse'
        specOptions:
          $ref: '#/components/schemas/GetSpecOptionsResponse'  
    SaveOrderResponse:
      type: object
      properties:
        id: 
          type: string
          description: "id заказа"
    GetMaterialsResponse:
      type: array
      example: [{"id": "015-01ef-0011", "name": "Внутренний корпус ГТК из сетки оц. стали, диаметр 315, L 900", "units": "шт.", "count": 12, "waste": 0.000, "childs": [{"id": "011-1ef-0012", "name": "Сетка ПВС TR1606/0.7/1.47/880-5000/Zn08ПС" ,"count": 12 ,"waste": 0.000}]}]
      items:
        $ref: '#/components/schemas/OrderMaterialItem'
    OrderMaterialItem:
      type: object
      properties:
        id:
          type: string
          description: "id материала"
        name:
          type: string
          description: "Наименование материала"
        units:
          type: string
          description: "Единицы измерения"
        count:
          type: number
          description: "Количество"
        waste:
          type: number
          description: "Отход, поле может отсутствовать"
        childs:
          type: array
          description: "Вложенный список сборочных единиц в таком же формате [id, name, count, waste, childs]. Может отсутствовать, может быть рекурсивным"
          items:
            $ref: '#/components/schemas/OrderMaterialItem'
    GetOperationsResponse:
      type: object
      example: {"planLaborIntensity": 197, "planPreparationTime": "32:46", operations: [{"id": "015-01ef-0011", "name": "Лазерная резка", "standardTime": "01:37", "childs": [{"id": "011-1ef-0012", "name": "Протяжка рулона на лазере", "standardTime": "00:24", "childs": [{"id": "011-1ef-0013", "name": "Тройник прямой оц.ст. 0.65 мм 1300х1100 / Ф70 / 1300х1100 L=1700 мм h=100 мм отб40 / вырезной / загл Эмаль ПФ115", "standardTime": "00:09"}]}]}]}
      properties:
        planLaborIntensity:
          type: number
          description: "Плановая трудоёмкость заказа (человеко-час)"
        planPreparationTime:
          type: string
          description: "Плановое время изготовления Заказа (час:мин)"
        operations:
          type: array
          items:
            $ref: '#/components/schemas/OrderOperationItem'
    GetDeliveryWaysResponse:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
            description: "id способа доставки"
          deliveryWay:
            type: string
            description: "Наименование способа доставки"
    OrderOperationItem:
      type: object
      properties:
        id:
          type: string
          description: "id операции"
        name:
          type: string
          description: "Наименование операции"
        standardTime:
          type: string
          description: "Норма времени (час:мин)"
        childs:
          type: array
          description: "Вложенный список операций в таком же формате [id, name, standardTime, childs]. Может отсутствовать, может быть рекурсивным"
          items:
            $ref: '#/components/schemas/OrderOperationItem'
    GetPaymentsResponse:
      type: array
      example: [{"id": "015-01ef-0011", "billDate": "03.11.2022T00:00:00", "paymentDate": "09.11.2022T00:00:00", "name": "Покупка вентизделий для дома-музея Фредди Меркьюри на ул. Фучика", "summ": 42057.08}]
      items:
        $ref: '#/components/schemas/OrderPaymentItem'
    OrderPaymentItem:
      type: object
      properties:
        id:
          type: string
          description: "id платежа"
        billDate:
          type: string
          description: "Дата выставления счета"
        paymentDate:
          type: string
          description: "Дата оплаты"
        name:
          type: string
          description: "Наименование платежа"
        summ:
          type: number
          description: "Сумма платежа"  
    GetProductById:
      type: object
      example: {"id": "0011-11ef-1111"}
      properties:
        id:
          type: string
          description: "id изделия"
    GetProductByIdResponse:
      type: object
      example: {"type": "RoundStraightIncut_t", "properties": {"SteelType": "galvanized", "SteelThickness": 0.45, "D": 200, "FireResistanceClass": "none"}, "common": {"names": [{"title": "Основное", "name": "Тройник прямой оц.ст. 0.65 мм"}, {"title": "Для печати", "name": "Тройник прямой оц.ст. 0.65 мм"}], "actual": true, "recalcDate": "2023-12-07T09:28:46"}, "prices": {"MaterialCost": 1012.73, "WorkCost": 960.04, "AccCost": 2236.61, "MinPrice": 9300.49, "GrossPrice": 10107.99}, "totals": {"weight": 2.476, "wasteWeight": 0.195, "time": "05:34", "laborIntensity": 5.4}, "materials": [{"id": "015-01ef-0011", "name": "Внутренний корпус ГТК из сетки оц. стали, диаметр 315, L 900", "units": "шт.", "count": 12, "waste": 0, "childs": [{"id": "011-1ef-0012", "name": "Сетка ПВС TR1606/0.7/1.47/880-5000/Zn08ПС", "count": 12, "waste": 0}]}], "operations": [{"id": "0011-ef15-0001", "stage": "Лазерная резка", "area": "Участок резки", "name": "Протяжка рулона на лазере", "time": "00:07", "laborIntensity": 0.6, "childs": [{"id": "011-1ef-0013", "name": "Врезка круг/круг седло из оц. стали, диаметр 100/100, H=100", "time": "00:07", "laborIntensity": 0.6}]}], "sizes": {"length": 2200, "width": 1750, "height": 1400, "weight": 6.073, "square": 1.25, "volume": 5.39}}
      properties:
        type:
          type: string
          description: "Тип изделия"
        properties:
          type: object
          description: "Индивидуальные параметры изделия"
          properties:
            SteelType:
              type: string
              description: "Тип стали (итд)"
        common:
          type: object
          properties:
            names:
              type: array
              items:
                type: object
                properties:
                  title:
                    type: string
                    description: "Наименование заголовка"
                  name:
                    type: string
                    description: "Наименование поменклатуры"
            actual:
              type: boolean
              description: "Актуальность данных (true = не требудет пересчета)"
            recalcDate:
              type: string
              description: "Дата расчета"
        prices:
          type: object
          properties:
            MaterialCost:
              type: number
              example: 986.74
              description: "Стоимость материалов, руб"
            WorkCost:
              type: number
              example: 564.00
              description: "Стоимость работ, руб"
            AccCost:
              type: number
              example: 1472.58
              description: "Себестоимость, руб"
            MinPrice:
              type: number
              example: 2453.49
              description: "Минимальная цена, руб"
            GrossPrice:
              type: number
              example: 2780.63
              description: "Розница, руб"
        totals:
          type: object
          properties:
            weight:
              type: number
              example: 2.476
              description: "Общий вес стали, кг"
            wasteWeight:
              type: number
              example: 0.195
              description: "Общий вес отхода стали, кг"
            time:
              type: string
              example: "05:34"
              description: "Суммарное время изготовления (мин:сек)"
            laborIntensity:
              type: number
              example: 5.4
              description: "Общая трудоёмкость изготовления (чел*час)"
        materials:
          $ref: '#/components/schemas/GetMaterialsResponse'
        operations:
          type: array
          items:
            $ref: '#/components/schemas/OperationItem'
        sizes:
          type: object
          properties:
            length:
              type: number
              description: "Длина изделия, мм"
            width:
              type: number
              description: "Ширина изделия, мм"
            height:
              type: number
              description: "Высота изделия, мм"
            weight:
              type: number
              description: "Вес изделия, кг"
            square:
              type: number
              description: "Площадь изделия, м2"
            volume:
              type: number
              description: "Объем изделия, м3"
    OperationItem:
      type: object
      properties:
        id:
          type: string
          description: "id операции"
        stage:
          type: string
          description: "Этап"
        area:
          type: string
          description: "Участок"
        name:
          type: string
          description: "Наименование операции"
        time:
          type: string
          description: "Время (час:мин)"
        laborIntensity:
          type: number
          description: "Трудоемкость (чел * часы)"
        childs:
          type: array
          description: "Вложенный список операций в таком же формате [id, name, time, laborIntensity, childs]. Может отсутствовать, может быть рекурсивным"
          items:
            $ref: '#/components/schemas/OperationItem'
    GetProductList:
      type: object
      properties:
        sectionId:
          type: string
          description: "id раздела"
        search:
          type: string
          description: "Строка поиска изделия"
        offset:
          type: number
          description: "Сдвиг пагинации"
    GetProductListResponse:
      type: object
      properties:
        end:
          type: boolean
          example: true
          description: "Флаг полной выгрузки списка (для выключения пагинации)"
        products:
          type: array
          items:
            $ref: '#/components/schemas/ProductListItem'
    GetUnactualCountResponse:
      type: object
      properties:
        availCalcs:
          type: number
          example: 2719
          description: "Доступно расчетов"
        unactualTotal:
          type: number
          example: 537
          description: "Всего неактуальных позиций"
        unactualInSection:
          type: number
          example: 248
          description: "Неактуальных позиций в текущем разделе"
    ProductListItem:
      type: object
      properties:
        id:
          type: string
          example: "011-ef12-0001"
          description: "id изделия"
        actual:
          type: string
          enum:
            - actual
            - notActual
            - inProgress
          description: "Актуальность данных (actual = актуально (не требует пересчета), notActual = неактуально, inProgress = в процессе пересчета)"
        name:
          type: string
          example: "Врезка (адаптер) из оц. стали, класс 'B' для EI, 400х200, L=1500, исп.2"
          description: "Наименование изделия"
        units:
          type: string
          example: "шт."
          description: "Единицы измерения"
        matCost:
          type: number
          example: 986.74
          description: "Стоимость материалов, руб"
        workCost:
          type: number
          example: 564.00
          description: "Стоимость работ, руб"
        netCost:
          type: number
          example: 1472.58
          description: "Себестоимость, руб"
        minPrice:
          type: number
          example: 2453.49
          description: "Минимальная цена, руб"
        price:
          type: number
          example: 2780.63
          description: "Розница, руб"
    RecalcSectionProductList:
      type: object
      properties:
        sectionId:
          type: string
          description: "id раздела"
          example: "015-01ef-0011"
    GetUnactualCount:
      type: object
      properties:
        sectionId:
          type: string
          description: "id раздела"
          example: "015-01ef-0011"
    RecalcSelectProductList:
      type: object
      example: "{ids: ['015-01ef-0011', '015-01ef-0012', '015-01ef-0013']}"
      properties:
        ids:
          type: array
          items:
            type: string
    GetHistoryResponse:
      type: array
      example: [{"id": "015-01ef-0011", "date": "03.11.2022T09:57:00", "name": "Событие: Тексты событий формируются беком", "user": "Фамилия И. О."}]
      items:
        $ref: '#/components/schemas/OrderHistoryItem'
    OrderHistoryItem:
      type: object
      properties:
        id:
          type: string
          description: "id события"
        date:
          type: string
          description: "Дата/время события"
        name:
          type: string
          description: "Наименование события"
        user:
          type: string
          description: "Пользователь"
    GetFilesResponse:
      type: array
      example: [{"id": "015-01ef-0011", "name": "Name_loading_file.docx", "date": "03.11.2022T00:00:00", "size": "36942", "readonly": false}]
      items:
        $ref: '#/components/schemas/OrderHistoryItem'
    OrderFileItem:
      type: object
      properties:
        id:
          type: string
          description: "id файла"
        name:
          type: string
          description: "Имя файла"
        date:
          type: string
          description: "Дата загрузки файла"
        size:
          type: string
          description: "Размер файла, КВ"
        readonly:
          type: boolean
          description: "Файл запрещен к удалению"
    GetLogCalcs:
      type: object
      example: {"configId": "015-01ef-0011", "search": "Самый лучший расчет", "from": "03.11.2022T00:00:00", "to": "13.11.2022T00:00:00"}
      properties:
        configId: 
          type: string
          description: "Фильтр по id конфигурации"
        search:
          type: string
          description: "Фильтр по строке поиска"  
        from:
          type: string
          description: "Фильтр по дате расчета (начало периода)"
        to:
          type: string
          description: "Фильтр по дате расчета (окончание периода)"
    GetLogCalcsResponse:
      type: array
      example: [{"id": "015-01ef-0011", "num": 1, "date": "31.08.2023T09:26:44", "name": "Тип изделия металл, размеры 1, размеры 2, особенности", "application": "1С — Клиент", "packId": "000000000000006203", "hash": "08e4328a6e00eb1050b837ec2404862c"}]
      items:
        $ref: '#/components/schemas/LogCalcItem'
    LogCalcItem:  
      type: object
      properties:
        id:
          type: string
          description: "id расчета"
        num:
          type: number
          description: "Порядковый номер расчета"
        date:
          type: string
          description: "Дата и время расчета"
        name:
          type: string
          description: "Наименование расчета"
        application:
          type: string
          description: "Приложение для расчета"
        packId:
          type: string
          description: "id пакета расчета"
        hash:
          type: string
          description: "Хеш расчета"
    GetConfigsResponse:
      type: array
      example: [{"id": "015-01ef-0011", "name": "ООО Трубное решение"}, {"id": "015-01ef-0012", "name": "ОАО Вентилятор"}]
      items:
        type: object
        properties:
          id:
            type: string
            description: "id конфигурации"
          name:
            type: "string"
            description: "Наименовании конфигурации"
    GetVendors:
      type: object
      example: {"search": "Трубное решение"}
      properties:
        search: 
          type: string
          description: "Фильтр по строке поиска"
    GetVendorsResponse:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
            description: "id поставщика"
            example: "015-01ef-0011"
          name:
            type: string
            description: "Наименовании поставщика"
            example: "Трубное решение"
          billTerm:
            type: number
            description: "Срок выставления счета (дней)"
            example: 2
          payTerm:
            type: number
            description: "Срок оплаты (дней)"
            example: 3
          deliveryTerm:
            type: number
            description: "Срок поставки (дней)"
            example: 5
          deliveryTypes:
            type: string
            description: "Виды доставки"
            example: "Самовывоз, Доставка Поставщика"
          mapAreas:
            type: object
            description: "Описание координат областей возможной доставки"
            properties:
              center:
                type: array
                description: "Центр карты"
                example: [55.75, 37.62]
                items:
                  type: number
              zoom:
                type: number
                description: "Масштаб карты по умолчанию"
                example: 14
              poligons:
                type: array
                description: "Массив областей с массивом координат"
                example: [[[54.75, 36.62], [55.55, 37.52], [58.55, 39.52]], [[64.75, 36.62], [65.55, 37.52], [68.55, 39.52]]]
                items:
                  areas:
                    type: array
                    items:
                      points:
                        type: array
                        items:
                          point:
                            type: number
          loadAddress:
            type: string
            description: "Адрес погрузки"
            example: "СПб, пр. Ветеранов, 56, строение 4"
          site:
            type: string
            description: "Сайт производителя"
            example: "https://name-site.com"
          phone:
            type: string
            description: "Телефон производителя"
            example: "+7 905 703-44-03"
    GetMaterialsSectionsResponse:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
            description: "id секции"
            example: "015-01ef-0011"
          name:
            type: string
            description: "Наименовании секции"
            example: "Листовой металл"
    GetConfigMaterials:
      type: object
      properties:
        section: 
          type: string
          description: "Фильтр по id секции"
          example: "015-01ef-0011"
        search: 
          type: string
          description: "Фильтр по строке поиска"
          example: "Штрипс"
        offset:
          type: number
          description: "Сдвиг пагинации"
    GetConfigMaterialsResponse:
      type: object
      properties:
        end:
          type: boolean
          example: true
          description: "Флаг полной выгрузки списка (для выключения пагинации)"
        list:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                description: "id материала"
                example: "015-01ef-0011"
              name:
                type: string
                description: "Наименование материала"
                example: "Штрипс оц. 0.45/137"
              price:
                type: number
                description: "Цена (с НДС), ₽"
                example: 90
              units:
                type: string
                description: "Единицы измерения"
                example: "кг"
    GetConfigEconomic:
      type: object
      properties:
        section: 
          type: string
          description: "Фильтр по наименованию секции"
          example: "priceTypes"
          enum:
            - priceTypes
            - formulas
    GetConfigEconomicResponse:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
            description: "id параметра"
            example: "015-01ef-0011"
          name:
            type: string
            description: "Наименование параметра"
            example: "Ставка нормо-часа рабочего (СНЧ), руб/час"
          value:
            type: number | string
            description: "Значение параметра или формулы"
            example: 390
    SetMaterialPrices:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
            description: "id материала"
            example: "015-01ef-0011"
          price:
            type: number
            description: "Цена (с НДС), ₽"
            example: 95
    SetEconomicParamValue:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
            description: "id параметра"
            example: "015-01ef-0011"
          value:
            type: number
            description: "Значение"
            example: 490 
tags:
  - name: auth
    description: Авторизация/регистрация
  - name: product
    description: Изделия
  - name: profile
    description: Страница профиля
  - name: packs
    description: Страница пакетов расчета
  - name: files
    description: Работа с документами
  - name: orders
    description: Работа с заказами
  - name: order
    description: Работа с заказом
  - name: logcalcs
    description: Работа с журналом расчетов
  - name: vendors
    description: Работа со списком поставщиков
  - name: config
    description: Работа с конфигурацией
paths:

  # auth part

  /api/auth/login:
    post:
      tags:
        - auth
      summary: "Авторизация по логину и паролю"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Auth'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
  /api/auth/setPassword:
    post:
      tags:
        - auth
      summary: "Установить новый пароль"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewPassword'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NewPasswordResponse'
  /api/auth/getRegistration:
    post:
      tags:
        - auth
      summary: "Получить на почту ссылку на регистрацию"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetRegistration'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetRegistrationResponse'
  /api/auth/getRegEmail:
    post:
      tags:
        - auth
      summary: "Получить данные пользователя по id сессии"
      description: "Отдает почту пользователя, который пытается зарегистрироваться или имя пользователя, если он сбрасывает пароль"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetRegEmail'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetRegEmailResponse'
  /Customer/getUser:
    get:
      security:
        - bearerAuth: []
      tags:
        - auth
      summary: "Получить текущего пользователя"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetUserResponse'
  /api/auth/Recovery:
    post:
      tags:
        - auth
      summary: "Начать процедуру сброса пароля"
      description: "Отправляет на почту пользователя инструкцию. Необходимо указать либо почту, либо логин"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Recovery'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecoveryResponse'
  /api/auth/register:
    post:
      tags:
        - auth
      summary: "Завершение регистрации"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Register'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterResponse'
  /api/auth/changemail:
    post:
      tags:
        - auth
      summary: "Подтверждение смены почты"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Changemail'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"

  # product part
              
  /api/config/read:
    get:
      security:
        - basicAuth: []
      tags:
        - product
      summary: "Получить справочник из сервиса расчета"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /api/types?&title=1&bytarget=unf_product_t&input_schema=1:
    get:
      security:
        - basicAuth: []
      tags:
        - product
      summary: "Получить список изделий"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /api/call?&source={currentProduct}&target=unf_product_t:
    post:
      tags:
        - product
      security:
        - basicAuth: []
      parameters:
        - in: path
          name: currentProduct
          schema:
            type: string
          required: true
          description: ID изделия
      summary: "Запросить расчет изделия"
      requestBody:
        content:
          application/json: {}
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Product/getProductById:
    post:
      tags:
        - product
      security:
        - bearerAuth: []
      summary: "Получить данные об изделии"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetProductById'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetProductByIdResponse'
  /Product/getProductsList:
    post:
      tags:
        - product
      security:
        - bearerAuth: []
      summary: "Получить список изделий"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetProductList'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetProductListResponse'
  /Product/getSections:
    get:
      tags:
        - product
      security:
        - bearerAuth: []
      summary: "Получить наименования разделов изделий"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMaterialsSectionsResponse'
  /Product/getUnactualCount:
    post:
      tags:
        - product
      security:
        - bearerAuth: []
      summary: "Получить общее кол-во неактуальных изделий и кол-во неактуальных изделий в разделе"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetUnactualCount'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetUnactualCountResponse'
  /Product/recalcAllProductsList:
    get:
      tags:
        - product
      security:
        - bearerAuth: []
      summary: "Пересчитать все позиции в списке изделий"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Product/recalcSectionProductsList:
    post:
      tags:
        - product
      security:
        - bearerAuth: []
      summary: "Пересчитать список изделий для выбранного раздела"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RecalcSectionProductList'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Product/recalcSelectProductsList:
    post:
      tags:
        - product
      security:
        - bearerAuth: []
      summary: "Пересчитать выбранные позиции в списке изделий"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RecalcSelectProductList'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"


  # profile part
  /Profile/getUserInfo:
    get:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Получить данные профиля текущего пользователя"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetUserInfoResponse'
  /Profile/confirmNewEmail:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Подтверждение новой почты"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConfirmNewEmail'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Profile/sendSms:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Запрос на отправку смс для подтверждения номера телефона"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendSms'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Profile/confirmPhone:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Подтверждение номера телефона"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConfirmPhone'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Profile/setUserFullname:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Установить ФИО пользователя"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetUserFullname'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Profile/setNewPassword:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Сменить пароль"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetNewPassword'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Profile/removeCounterparty:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Удалить контрагента"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveCounterparty'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Profile/addCounterparty:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Добавить контрагента"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddCounterparty'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddCounterpartyResponse'
  /Profile/editCounterparty:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Изменить контрагента"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EditCounterparty'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Profile/getCounterpartyByINN:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Получить данные о реквизитах контрагента по его ИНН (через сервис dadata)"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetCounterpartyByINN'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Profile/getBankByBIK:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Получить данные о реквизитах банка по его БИК"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetBankByBIK'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetBankByBIKResponse'
  /Profile/changeToManufactor:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Сменить роль пользователя на Производитель"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangeToManufactor'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Profile/changeToVendor:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Сменить роль пользователя на Поставщик"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangeToVendor'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Profile/getCityList:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Получить список населенных пунктов"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetCityList'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCityListResponse'
  /Profile/getRegionList:
    get:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Получить список регионов"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetRegionListResponse'
  /Profile/setProxyId:
    post:
      security:
        - bearerAuth: []
      tags:
        - profile
      summary: "Сохранить документ доверенности"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetProxyId'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  # packs part
  /Packs/getInfo:
    get:
      security:
        - bearerAuth: []
      tags:
        - packs
      summary: "Получить данные о пакетах расчета для текущего пользователя"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetPacksInfo'
  /Packs/getBuySchema:
    get:
      security:
        - bearerAuth: []
      tags:
        - packs
      summary: "Получить данные о вариантах покупки пакетов"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetBuySchema'
  /Packs/getBill:
    post:
      security:
        - bearerAuth: []
      tags:
        - packs
      summary: "Получить счет"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetPacksBill'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetPacksBillResponse'
  /Packs/setAutoActivation:
    post:
      security:
        - bearerAuth: []
      tags:
        - packs
      summary: "Изменить режим автоактивации"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetAutoActivation'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Packs/setOrder:
    post:
      security:
        - bearerAuth: []
      tags:
        - packs
      summary: "Изменить порядок следования пакетов"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetPacksOrder'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Packs/activate:
    post:
      security:
        - bearerAuth: []
      tags:
        - packs
      summary: "Ручная активация пакета"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PacksActivate'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  # files part
  /Files/getDocumentById:
    post:
      security:
        - bearerAuth: []
      tags:
        - files
      summary: "Получить документ по id"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetDocumentById'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetDocumentByIdResponse'
  /Files/upload:
    post:
      security:
        - bearerAuth: []
      tags:
        - files
      summary: "Загрузить файл на сервер"
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: file
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileUploadResponse'
  # order list part
  /Orders/getList:
    post:
      security:
        - bearerAuth: []
      tags:
        - orders
      summary: "Получить список заказов текущего пользователя"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetOrderList'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetOrderListResponse'
  /Order/getStates:
    get:
      security:
        - bearerAuth: []
      tags:
        - orders
      summary: "Получить список статусов заказов"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetOrderStates'
  /Orders/getCurrectCount:
    get:
      security:
        - bearerAuth: []
      tags:
        - orders
      summary: "Получить количество требующих внимания заказов"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCurrectCount'
  /Orders/create:
    post:
      security:
        - bearerAuth: []
      tags:
        - orders
      summary: "Создать заказ на основе другого заказа"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNewOrder'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetOrder'
  /Order/getOrder:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Получение данных для карточки заказа"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetOrder'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetOrderResponse'
  /Order/getCustomers:
    get:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Получить список возможных покупателей (для случая, когда пользователь - это производитель)"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCustomersSchema'
  /Order/getManufactors:
    get:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Получить список возможных производителей"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetManufactorsSchema'
  /Order/getOptions:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Получение дополнительных настроек для заказа"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetOrder'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetOptionsResponse'
  /Order/getSpecOptions:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Получение настроек выгрузки спецификации для заказа"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetOrder'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetSpecOptionsResponse'
  /Order/recalc:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Пересчитать все неактуальные позиции заказа"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetOrder'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Order/searchPositions:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Найти соответствие позиций вводимому запросу"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchPositions'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchPositionsResponse'
  /Order/changePosition:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Запрос позиции на изменение"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePosition'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChangePositionResponse'
  /Order/save:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Сохранение заказа"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SaveOrder'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SaveOrderResponse'
  /Order/makeOrder:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Выполнить заказ"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetOrder'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Order/saveOptions:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Сохранить дополнительные настройки для заказа"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetOptionsResponse'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Order/saveSpecOptions:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Сохранить настройки выгрузки спецификации для заказа"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetSpecOptionsResponse'
        required: true
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Order/getMaterials:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Получить список материалов"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetOrder'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMaterialsResponse'
  /Order/getPayments:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Получить список платежных документов"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetOrder'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetPaymentsResponse'
  /Order/getHistory:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Получить историю событий для заказа"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetOrder'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetHistoryResponse'
  /Order/getFiles:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Получить список файлов для заказа"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetOrder'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetFilesResponse'
  /Order/putFile:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Добавить файл в заказ"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderPutFile'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Order/removeFile:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Удалить файл из заказа"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveFile'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Order/getOperations:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Получить список операций"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetOrder'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetOperationsResponse'
  /Order/getSpec:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Получить спецификацию заказа в соответствии с настройками /Order/saveSpecOptions"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetOrder'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            multipart/form-data:
              schema:
                type: file
  /Order/getDeliveryWays:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Получить список способов доставки производителя"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetDeliveryWays'
  /Order/compareVendors:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Пересчитать заказ у другого поставщика"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompareVendors'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompareVendorsResponse'
  /Order/createByVendors:
    post:
      security:
        - bearerAuth: []
      tags:
        - order
      summary: "Создать заказы у других поставщиков"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateByVendors'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateByVendorsResponse'
  /LogCalcs/getLogCalcs:
    post:
      security:
        - bearerAuth: []
      tags:
        - logcalcs
      summary: "Получить журнал расчетов"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetLogCalcs'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetLogCalcsResponse'
  /LogCalcs/getConfigs:
    post:
      security:
        - bearerAuth: []
      tags:
        - logcalcs
      summary: "Получить список конфигураций"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetConfigsResponse'
  /Vendors/getVendors:
    post:
      security:
        - bearerAuth: []
      tags:
        - vendors
      summary: "Получить список поставщиков"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetVendors'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetVendorsResponse'
  /Config/Materials/getSections:
    get:
      security:
        - bearerAuth: []
      tags:
        - config
      summary: "Получить список разделов материалов"
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMaterialsSectionsResponse'
  /Config/Materials/getMaterials:
    post:
      security:
        - bearerAuth: []
      tags:
        - config
      summary: "Получить список материалов для конфигурации"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetConfigMaterials'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetConfigMaterialsResponse'
  /Config/Materials/setPrices:
    post:
      security:
        - bearerAuth: []
      tags:
        - config
      summary: "Сохранить цены для материалов"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetMaterialPrices'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
  /Config/Economic/getEconomic:
    post:
      security:
        - bearerAuth: []
      tags:
        - config
      summary: "Получить список экономических параметров"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetConfigEconomic'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetConfigEconomicResponse'
  /Config/Economic/setParamValue:
    post:
      security:
        - bearerAuth: []
      tags:
        - config
      summary: "Сохранить значения экономических параметров"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetEconomicParamValue'
      responses:
        401:
          description: "Error"
        200:
          description: "OK"